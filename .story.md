---
focus: SystemTextJson/Program.cs
---

# System.Text.Json

System.Text.Json is the built-in JavaScript Object Notation (JSON) serialization library in .NET for converting from .NET object types to a JSON string, and vice versa, supporting UTF-8 text encoding.

## Serialization Notification

Now, you can use callbacks to subscribe to [events](SystemTextJson/Program.cs:115) during serialization/[deserialization](SystemTextJson/Program.cs:118-124).

In [this example](SystemTextJson/Program.cs:12-15), we encounter an error thrown during deserialization.

```bash
$ dotnet run 
Serialization Notification
Exception thrown: True
```

## Property Ordering

You can use `JsonPropertyOrder` attribute to specify order in which properties are serialized.

In [this example](SystemTextJson/Program.cs:21-29), we serialize and `Order` and the order of properties is set by the [attributes](SystemTextJson/Program.cs:127-140).

```bash
$ dotnet run 
Property Ordering
{
  "OrderId": 1,
  "Address": "Address",
  "Quantity": 1,
  "Comments": [
    "Cool",
    "Awesome"
  ]
}
```

## IAsyncEnumerable support && Working with Streams

Now you [can use](SystemTextJson/Program.cs:35-46) `Stream` and `IAsyncEnumerable`.

```bash
$ dotnet run 
1
2
3
4
5
```

## Working with JSON DOM

Now you can use `System.Text.Json.JsonNode`. It is a base class that represents a single node within a mutable JSON document.

In [this example](SystemTextJson/Program.cs:54-78), we [parse](SystemTextJson/Program.cs:54) an `Order` from JSON string and access it's [properties](SystemTextJson/Program.cs:56-57). Also, we [can use](SystemTextJson/Program.cs:61-76) `JsonObject`, `JsonArray`, and `JsonValue` to construct a brand new `JsonObject` as a composite.

```bash
OrderId: 1
Order.Comments[0]: Cool
{
  "OrderId": 1,
  "Discounts": [
    {
      "DiscountId": 1,
      "Value": 0.05
    },
    {
      "DiscountId": 2,
      "Value": 0.1
    }
  ]
}
```

## Reference

* [dotnet/api/system.text.json.nodes.jsonnode](https://docs.microsoft.com/en-us/dotnet/api/system.text.json.nodes.jsonnode?view=net-6.0)
* [dotnet/standard/serialization/system-text-json-use-dom-utf8jsonreader-utf8jsonwriter](https://docs.microsoft.com/en-us/dotnet/standard/serialization/system-text-json-use-dom-utf8jsonreader-utf8jsonwriter)
* [dotnet/standard/serialization/system-text-json-handle-overflow](https://docs.microsoft.com/en-us/dotnet/standard/serialization/system-text-json-handle-overflow)
